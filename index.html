<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Калькулятор стоимости работ — Nord Чеб</title>
  <link rel="stylesheet" href="style.css?v024">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
</head>
<body class="dark">
  <main>
    <div class="container">
      <h1 style="margin:0 0 8px;">Калькулятор стоимости работ</h1>
      <div class="kicker">главная страница</div>

      <div class="section-title">Основные работы</div>
      <table class="calc-table" id="table-main">
        <thead>
          <tr><th>Наименование работ</th><th>Кол-во</th><th>Ед. изм.</th><th>Цена ед.</th><th>Цена</th></tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="section-title">Дополнительные работы</div>
      <table class="calc-table" id="table-extra">
        <thead>
          <tr><th>Наименование работ</th><th>Кол-во</th><th>Ед. изм.</th><th>Цена ед.</th><th>Цена</th></tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="total-line"><b>Итого:</b> <span id="grand-total">0</span> ₽</div>
      <div class="discount-wrap" style="display:flex;gap:10px;justify-content:flex-end;align-items:center;flex-wrap:wrap;margin-top:8px;">
        <label for="discount-input" class="kicker" style="margin-right:6px;">Персональная скидка, %</label>
        <input id="discount-input" type="number" min="0" max="100" step="1" placeholder="%" style="width:110px; padding:10px 12px; border-radius:12px; border:2px solid; border-color: var(--input-border,#2a2b2f); background: var(--input-bg,#111); color: #eaeaea; font-size:16px;">
      
      <div class="address-wrap" style="display:flex;gap:10px;justify-content:flex-end;align-items:center;flex-wrap:wrap;margin-top:8px;">
        <label for="address-input" class="kicker" style="margin-right:6px;">Адрес объекта</label>
        <input id="address-input" type="text" placeholder="Введите адрес" style="width:300px; padding:10px 12px; border-radius:12px; border:2px solid; border-color: var(--input-border,#2a2b2f); background: var(--input-bg,#111); color: #eaeaea; font-size:16px;">
      </div>
</div>
      <div class="kicker" id="discount-line" style="display:none; text-align:right; margin-top:6px;">Скидка <b><span id="discount-pct">0</span>%</b>: −<b><span id="discount-amount">0</span> ₽</b>. Итого со скидкой: <b><span id="grand-with-discount">0</span> ₽</b></div>

      <div class="est-actions" style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px;flex-wrap:wrap;">
        <button id="btn-estimate" class="btn-outline">Рассчёт</button>
        <button id="btn-copy-estimate" class="btn-outline" id="btn-copy">Скопировать</button>
        <button id="btn-estimate-pdf" class="btn-outline" id="btn-pdf">Скачать PDF</button>
      </div>
      <div id="estimate" class="container hidden" style="margin-top:12px;">
        <h2 style="margin:0 0 8px;">Смета</h2>
        <div id="estimate-body">Пока ничего не выбрано.</div>
        <div class="est-meta" style="margin-top:12px;">
          <label for="estimate-address" style="display:block;font-size:14px;opacity:.85;margin-bottom:6px;">Адрес:</label>
          <input id="estimate-address" type="text" placeholder="Укажите адрес объекта" style="width:100%;max-width:600px;">
        </div>
      </div>
    </div>
  </main>

  <div id="scrollFab" class="scroll-fab" role="button" aria-label="Прокрутить страницу" title="Вверх">↑</div>

  R.09.2025.05 • © Суперкондиционерщик Вано</footer>

  <script src="script.js?v024"></script>
  <script>
  // Данные — MAIN и EXTRA
  const MAIN = [
    { name:'Монтаж настенного кондиционера 07-09 BTU', unit:'компл.', price:12000 },
    { name:'Монтаж настенного кондиционера 12 BTU', unit:'компл.', price:14000 },
    { name:'Монтаж настенного кондиционера 18 BTU', unit:'компл.', price:16000 }
  ];
  const EXTRA = [
    { name:'Штроба в бетоне', unit:'п.м.', price:2500 },
    { name:'Штроба в кирпиче', unit:'п.м.', price:1500 },
    { name:'Штроба под дренаж в бетоне', unit:'п.м.', price:800 },
    { name:'Штроба под дренаж в кирпиче', unit:'п.м.', price:600 },
    { name:'Установка помпы', unit:'шт.', price:2000 },
    { name:'Пробивка доп. отверстия (ГКЛ и т.п., Ø до 52 мм)', unit:'отв.', price:500 },
    { name:'Пробивка доп. отверстия (бетон, Ø 52 мм)', unit:'отв.', price:2000 },
    { name:'Пробивка доп. отверстия (кирпич, Ø 52 мм)', unit:'отв.', price:1000 },
    { name:'Демонтаж кондиционера 07–12', unit:'шт.', price:3000 },
    { name:'Демонтаж кондиционера 18–24', unit:'шт.', price:4000 },
    { name:'Демонтаж внутреннего/наружного блока (за каждый)', unit:'блок', price:2000 },
    { name:'Монтаж наружного блока на вентилируемый фасад', unit:'услуга', price:3500 },
    { name:'Монтаж дополнительного дренажа без короба', unit:'п.м.', price:150 },
    { name:'Потолок «Армстронг» (разборка/сборка)', unit:'шт.', price:200 },
    { name:'Пайка фреоновых труб (за каждую)', unit:'пайка', price:500 },
    { name:'Чистка кондиционера (внутренний и наружный блок)', unit:'компл.', price:3000 },
    { name:'Чистка кондиционера — полный комплекс', unit:'компл.', price:4000 },
    { name:'Дозаправка кондиционера фреоном', unit:'г.', price:7, step:100 },
    { name:'Каждый дополнительный выезд', unit:'выезд', price:1000 },
    { name:'Автовышка (от 3 часов)', unit:'ч.', price:2000 },
    { name:'Установка антивандальной решётки', unit:'шт.', price:3000 },
    { name:'Установка зимнего комплекта', unit:'шт.', price:3000 },
    { name:'Удлинение провода', unit:'м.', price:350 },
    { name:'Кабель-канал под провод', unit:'м.', price:500 },
    { name:'Демонтаж/монтаж стеклопакета', unit:'шт.', price:1000 },
    { name:'Короб ДКС', unit:'п.м.', price:1200 },
    { name:'Элементы короба ДКС', unit:'шт.', price:350 }
  
  ];

  // Построение таблиц
  buildMainWithExtras(MAIN);
  buildTable('#table-extra', EXTRA);
  // Без вызова несуществующих/ломающих функций. Safe layer из script.js сам навесит обработчики и пересчитает.
  </script>
</body>
</html>
